<!-- src/app/pages/dashboard/dashboard.component.html -->
<div class="dashboard">
   <div class="kpi-row">
    <app-kpi-card
      *ngFor="let card of kpiCards"
      [label]="card.label"
      [value]="card.value"
      [sublabel]="card.sublabel"
      [variant]="card.variant">
    </app-kpi-card>
  </div>

  <div class="grid">
    <mat-card class="recent">
      <mat-card-title>Visitas Recentes</mat-card-title>
      <mat-card-subtitle>Últimas visitas registadas</mat-card-subtitle>

      <mat-tab-group [(selectedIndex)]="tabIndex">
        <mat-tab label="Abertas">
          <ng-container *ngFor="let v of recentOpen">
            <div class="visit mt-2">
              <div class="info">
                <h4>{{ v.name }}</h4>
                <p>{{ v.company }}</p>
                <p class="meta">
                  {{ v.department }} • Anfitrião: {{ v.host }} • {{ v.time }}
                </p>
              </div>
              <span class="chip chip-warning">No edifício</span>
            </div>
          </ng-container>
        </mat-tab>

        <mat-tab label="Fechadas">
          <ng-container *ngFor="let v of recentClosed">
            <div class="visit mt-2">
              <div class="info">
                <h4>{{ v.name }}</h4>
                <p>{{ v.company }}</p>
                <p class="meta">
                  {{ v.department }} • Anfitrião: {{ v.host }} • {{ v.time }}
                </p>
              </div>
              <span class="chip chip-green">Concluída</span>
            </div>
          </ng-container>
        </mat-tab>
      </mat-tab-group>
    </mat-card>

    <mat-card class="departments">
      <mat-card-title>Visitas por Departamento</mat-card-title>
      <mat-card-subtitle>Distribuição mensal</mat-card-subtitle>

      <div class="dept" *ngFor="let d of departments">
        <div class="label">
          {{ d.name }}
          <span>{{ d.value }}</span>
        </div>
        <div class="bar">
          <div class="bar-fill" [style.width.%]="d.percent"></div>
        </div>
      </div>
    </mat-card>
  </div>
</div>