<mat-card class="users-card">
    <div class="header">
        <div class="title-wrap">
            <mat-icon class="mr-8">person</mat-icon>
            <div>
                <h2 class="title">Registos de Utilizadores</h2>
                <div class="subtitle">Total de {{ total }} utilizadores encontrados</div>
            </div>
        </div>

        <app-export [actions]="exportActions" [disabled]="!rowsView.length" (action)="onExport($event)">
        </app-export>
    </div>

    <app-filters [form]="form" [config]="filterConfig" (clear)="clearFilters()">
    </app-filters>

    <app-table [data]="rowsView" [columns]="tableColumns">
        <!-- Template: Perfil -->
        <ng-template appTableCell="perfil" key="perfil" let-row>
            <mat-chip [ngClass]="getPerfilClass(row.perfil)" class="chip-custom">
                <mat-icon class="chip-icon">{{ getPerfilIcon(row.perfil) }}</mat-icon>
                {{ getPerfilLabel(row.perfil) }}
            </mat-chip>
        </ng-template>

        <!-- Template: Status -->
        <ng-template appTableCell="status" key="status" let-row>
            <mat-chip [ngClass]="{
      'chip-active': row.status === 'Ativo',
      'chip-inactive': row.status !== 'Ativo'
    }" class="chip-custom">
                <mat-icon class="chip-icon">
                    {{ row.status === 'Ativo' ? 'check_circle' : 'cancel' }}
                </mat-icon>
                {{ row.status }}
            </mat-chip>
        </ng-template>

        <!-- Template: Ações -->
        <ng-template appTableCell="acoes" key="acoes" let-row>
            <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="verDetalhes(row)">
                    <mat-icon>visibility</mat-icon>
                    Ver Detalhes
                </button>
                <button mat-menu-item (click)="editar(row)">
                    <mat-icon>edit</mat-icon>
                    Editar
                </button>
                <button mat-menu-item (click)="excluir(row)" color="warn">
                    <mat-icon>delete</mat-icon>
                    Excluir
                </button>
            </mat-menu>
        </ng-template>
    </app-table>


    <app-pagination [length]="total" [pageSize]="10" [pageSizeOptions]="[5,10,20]" (page)="onPage($event)">
    </app-pagination>
</mat-card>